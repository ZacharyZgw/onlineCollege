<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zgw.core.consts.dao.IClassifyDao">
    <!--
        public Classify selectById(Long id);
    public List<Classify> selectAll();
    public List<Classify> selectByCondition(Classify classify);
    public Integer getTotalItemsCount(Classify classify);

    -->
    <sql id="All_Columns">
        name, code, parent_code, sort, create_time, create_user, update_time,
        update_user, del,clevel, id
    </sql>
    <select id="selectById" parameterType="long" resultType="com.zgw.core.consts.entity.Classify">
      SELECT
      <include refid="All_Columns"/>
        FROM classify
        WHERE id = #{id}
    </select>

    <select id="selectAll" resultType="com.zgw.core.consts.entity.Classify">
        SELECT
        <include refid="All_Columns"/>
        from classify
        WHERE del=0
        ORDER BY parent_code,sort
    </select>

    <select id="selectByCondition" parameterType="com.zgw.core.consts.entity.Classify"
            resultType="com.zgw.core.consts.entity.Classify">
        SELECT
        <include refid="All_Columns" />
        FROM classify
        <trim prefix="WHERE" prefixOverrides="AND |OR ">
            del = 0
            <if test="code != null">
                AND code = #{code}
            </if>
            <if test="parentCode != null">
                AND parent_code = #{parentCode}
            </if>
        </trim>
        ORDER BY parent_code , sort
    </select>

    <select id="getTotalItemsCount" resultType="int">
        SELECT
        <include refid="All_Columns"/>
        FROM classify
        WHERE del =0
    </select>
    <select id="selectByCode" parameterType="string"
            resultType="com.zgw.core.consts.entity.Classify">
        select
        <include refid="All_Columns"/>
        FROM classify
        WHERE code=#{code}
        and del=0
    </select>

</mapper>